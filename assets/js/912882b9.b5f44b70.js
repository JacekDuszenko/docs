"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4725],{6543:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var t=a(7462),i=(a(7294),a(3905));const l={title:"Aladino Language",id:"aladino-language",slug:"aladino-language"},o=void 0,s={unversionedId:"guides/aladino-language",id:"guides/aladino-language",title:"Aladino Language",description:"Aladino is a simple language to specify steps in pull request workflows.",source:"@site/docs/guides/aladino-language.md",sourceDirName:"guides",slug:"/guides/aladino-language",permalink:"/next/guides/aladino-language",draft:!1,editUrl:"https://github.com/reviewpad/docs/tree/main/docs/guides/aladino-language.md",tags:[],version:"current",frontMatter:{title:"Aladino Language",id:"aladino-language",slug:"aladino-language"},sidebar:"DocsSidebar",previous:{title:"YAML Syntax",permalink:"/next/guides/syntax"},next:{title:"Built-ins",permalink:"/next/guides/built-ins"}},r={},p=[{value:"Syntax",id:"syntax",level:2},{value:"Semantic",id:"semantic",level:2}],u={toc:p},d="wrapper";function g(e){let{components:n,...a}=e;return(0,i.kt)(d,(0,t.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Aladino is a simple language to specify steps in pull request workflows."),(0,i.kt)("p",null,"The expressions in the language allow you to easily perform read and write actions on pull requests."),(0,i.kt)("h2",{id:"syntax"},"Syntax"),(0,i.kt)("p",null,"The syntax of Aladino is quite simple. Here's the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form"},"BNF")," grammar representation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"prog := stat_list\n\nstat := expr\n\nexpr := expr BINOP expr\n    | UNARYOP expr\n    | TIMESTAMP\n    | RELATIVE_TIMESTAMP\n    | NUMBER\n    | STRING\n    | BOOLEAN\n    | '(' expr ')'\n    | '[' expr_list ']'\n    | '$' IDENTIFIER '(' expr_list ')'\n    | '(' expr_list '=>' expr  ')'\n\nexpr_list :=\n        expr ',' expr_list\n    | expr\n    |\n\nTIMESTAMP :=\n        YYYYMMDD\n    | YYYY-MM-DD\n    | YYYYMMDDTHH:MM:SS\n    | YYYY-MM-DDTHH:MM:SS\n\nRELATIVE_TIMESTAMP := NUMBER TIME_UNIT ago\n\nTIME_UNIT :=\n        'year'   | 'years'\n    | 'month'  | 'months'\n    | 'week'   | 'weeks'\n    | 'day'    | 'days'\n    | 'hour'   | 'hours'\n    | 'minute' | 'minutes'\n\nBINOP :=\n        '==' | '>=' | '>' | '<' | '<='\n    | '&&' | '||'\n\nUNARYOP := '!'\n")),(0,i.kt)("p",null,"This allows us to specify:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Logical expressions: e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},'"a" == "a"')," or ",(0,i.kt)("inlineCode",{parentName:"li"},"$fun() == 1"),";"),(0,i.kt)("li",{parentName:"ol"},"Function calls: e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},'$label("bug")')),(0,i.kt)("li",{parentName:"ol"},"Lambda functions: e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"($dev => $dev == $author())"))),(0,i.kt)("h2",{id:"semantic"},"Semantic"),(0,i.kt)("p",null,"Aladino supports five types of values: ",(0,i.kt)("inlineCode",{parentName:"p"},"booleans"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"numbers"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"strings"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"arrays")," and a special type ",(0,i.kt)("inlineCode",{parentName:"p"},"_action_"),"."),(0,i.kt)("p",null,"Since the language is quite simple, it is also straightforward to perform type inference."),(0,i.kt)("p",null,"There are two requirements when it comes to typing:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The type of the expression in a rule ",(0,i.kt)("inlineCode",{parentName:"li"},"spec")," is ",(0,i.kt)("em",{parentName:"li"},"bool"),". For example, the following rule is invalid:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'- name: doesnt-type-check-to-bool\n  kind: patch\n  description: Rule that does not type check to bool\n  spec: "hello" # type error\n')),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"The type of each action to be ",(0,i.kt)("em",{parentName:"li"},"effect.")," For example, the following ",(0,i.kt)("inlineCode",{parentName:"li"},"workflow")," is invalid because of its actions:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'- name: invalid-workflow\n  description: Invalid workflow because of action\n  run:\n    if: rule_1\n    then: "hello" # type error\n')),(0,i.kt)("p",null,"Since, by design, you cannot define functions or variables, the usefulness of the language comes down to the set of built-in variables and functions that are provided."))}g.isMDXComponent=!0}}]);
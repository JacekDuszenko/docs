labels:
  ask:
    color: fd5e53
  show:
    color: ffd800
  ship:
    color: 76dbbe

groups:
  - name: juniors
    kind: developers
    type: filter
    param: developer
    where: $pullRequestCountBy($developer) < 10

workflows:
  - name: ask
    description: Ask process - request a review before merge
    run:
      if: $hasFileName("main.js") || $fileCount() > 5 || $isElementOf($author(), $group("juniors"))
      then:
        - $addLabel("ask")
        - $assignRandomReviewer()

  - name: show
    description: Show process - auto-merge and later review
    run:
      - if: $hasFileExtensions([".md"])
        then: $assignReviewer($group("seniors"), "reviewpad")
      - if: $hasFileExtensions([".md"]) || $hasFileExtensions([".test.ts"])
        then:
          - $addLabel("show")
          - $merge("rebase")

  - name: ship
    description: Ship process - auto-merge without need for review
    run:
      if: $size() < 50
      then:
        - $addLabel("ship")
        - $merge("rebase")
